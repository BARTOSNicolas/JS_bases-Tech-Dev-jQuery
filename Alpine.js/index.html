<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"
            integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg=="
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.8.1/dist/alpine.min.js" defer></script>
    <script src="script.js"></script>
    <title>Pierre Feuille Ciseaux Alpine Version</title>
</head>
<body class="bg-dark" x-data="{computerChoice : null, playerChoice : null, scorePlayer : 0, scoreComputer : 0, resultText : ''}">
<section class="choice pt-5 container">

    <h1 class="text-light text-center pb-5">Pierre - Feuille - Ciseaux Alpine JS</h1>

    <div class="row pt-5 pb-5">
        <div class="col-2 offset-3">
            <img src="img/pierre.svg" alt="pierre" class="img-fluid" x-ref="pierre" @click="playerChoice = 0;computerChoice = Math.floor(Math.random() * Math.floor(3)); resultText = findWinner(playerChoice, computerChoice);
            if(findWinner(playerChoice, computerChoice) == 'win'){scorePlayer++}else if(findWinner(playerChoice, computerChoice) == 'lose'){scoreComputer++}"
            >
        </div>
        <div class="col-2">
            <img src="img/feuille.svg" alt="feuille" class="img-fluid" x-ref="feuille" @click="playerChoice = 1;computerChoice = Math.floor(Math.random() * Math.floor(3)); resultText = findWinner(playerChoice, computerChoice);
            if(findWinner(playerChoice, computerChoice) == 'win'){scorePlayer++}else if(findWinner(playerChoice, computerChoice) == 'lose'){scoreComputer++}"
            >
        </div>
        <div class="col-2">
            <img src="img/ciseaux.svg" alt="ciseaux" class="img-fluid" x-ref="ciseaux" @click="playerChoice = 2;computerChoice = Math.floor(Math.random() * Math.floor(3)); resultText = findWinner(playerChoice, computerChoice);
            if(findWinner(playerChoice, computerChoice) == 'win'){scorePlayer++}else if(findWinner(playerChoice, computerChoice) == 'lose'){scoreComputer++}"
            >
        </div>
    </div>

</section>
<section class="result container pt-2">
    <h2 class="text-light text-center">RÃ©sultats</h2>
    <div class="row">
        <div class="col-3 offset-2" x-ref="playerChoice">
            <img src="img/pierre.svg" alt="pierre" class="img-fluid" x-show="playerChoice == 0">
            <img src="img/feuille.svg" alt="feuille" class="img-fluid" x-show="playerChoice == 1">
            <img src="img/ciseaux.svg" alt="ciseaux" class="img-fluid" x-show="playerChoice == 2">
        </div>
        <div class="col-2 text-center d-flex align-items-center justify-content-center">
            <img src="img/vs.svg" alt="versus" class="img-fluid h-50">
        </div>
        <div class="col-3 text-light pb-5" x-ref="computerChoice">
            <img src="img/pierre.svg" alt="pierre" class="img-fluid" x-show="computerChoice == 0">
            <img src="img/feuille.svg" alt="feuille" class="img-fluid" x-show="computerChoice == 1">
            <img src="img/ciseaux.svg" alt="ciseaux" class="img-fluid" x-show="computerChoice == 2">
        </div>
        <h3 class="text-light text-center">Player : <span x-text="scorePlayer"></span> - Computer : <span x-text="scoreComputer"></span></h3>
        <h3 class="text-light text-center" x-text="resultText"></h3>
    </div>
</section>

<script>
    function findWinner(playerChoice, computerChoice) {
        if (playerChoice == computerChoice) {
            return 'tied'
        } else {
            if (playerChoice == '0' && computerChoice == '2') {
                return 'win';

            } else if (playerChoice == "1" && computerChoice == "0") {
                return 'win';

            } else if (playerChoice == "2" && computerChoice == "1") {
                return 'win';

            } else {
                return 'lose';
            }
        }
    }
</script>
</body>
</html>